{"version":3,"file":"CollectionFileManager.js","sourceRoot":"","sources":["../../../src/db/collection/CollectionFileManager.ts"],"names":[],"mappings":"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"}